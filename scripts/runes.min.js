document.querySelectorAll(".row .ratio input").forEach((c=>c.value=0)),document.querySelectorAll(".row .have input").forEach((c=>c.value=0)),document.querySelectorAll(".row .want input").forEach((c=>c.value=0)),document.querySelectorAll(".row .need").forEach((c=>c.innerHTML="0")),document.querySelector("#use_ah input[name='use_ah']").removeAttribute("checked");let GOLD_DUST_PRICE=9e3,CRYSTAL_CHIP_PRICE=0,RUNE_PRICE=4500;const costs=[];costs[2]=[],costs[2][-7]={cc:28,gd:384e4},costs[2][-6]={cc:31,gd:192e4},costs[2][-5]={cc:34,gd:96e4},costs[2][-4]={cc:38,gd:48e4},costs[2][-3]={cc:41,gd:24e4},costs[2][-2]={cc:45,gd:12e4},costs[2][-1]={cc:50,gd:6e4},costs[2][0]={cc:55,gd:3e4},costs[2][1]={cc:61,gd:15e3},costs[2][2]={cc:67,gd:7500},costs[2][3]={cc:73,gd:3750},costs[2][4]={cc:81,gd:1875},costs[2][5]={cc:89,gd:938},costs[2][6]={cc:97,gd:469},costs[2][7]={cc:107,gd:234},costs[3]=[],costs[3][-7]={cc:43,gd:576e4},costs[3][-6]={cc:57,gd:288e4},costs[3][-5]={cc:52,gd:144e4},costs[3][-4]={cc:57,gd:72e4},costs[3][-3]={cc:62,gd:36e4},costs[3][-2]={cc:69,gd:18e4},costs[3][-1]={cc:75,gd:9e4},costs[3][0]={cc:83,gd:45e3},costs[3][1]={cc:91,gd:22500},costs[3][2]={cc:100,gd:11250},costs[3][3]={cc:110,gd:5625},costs[3][4]={cc:122,gd:2813},costs[3][5]={cc:134,gd:1406},costs[3][6]={cc:147,gd:703},costs[3][7]={cc:352,gd:162},costs[4]=[],costs[4][-7]={cc:64,gd:864e4},costs[4][-6]={cc:70,gd:432e4},costs[4][-5]={cc:77,gd:216e4},costs[4][-4]={cc:85,gd:108e4},costs[4][-3]={cc:93,gd:54e4},costs[4][-2]={cc:102,gd:27e4},costs[4][-1]={cc:113,gd:135e3},costs[4][0]={cc:124,gd:67500},costs[4][1]={cc:136,gd:33750},costs[4][2]={cc:150,gd:16875},costs[4][3]={cc:165,gd:8438},costs[4][4]={cc:182,gd:4219},costs[4][5]={cc:200,gd:2109},costs[4][6]={cc:220,gd:1055},costs[4][7]={cc:242,gd:527},costs[5]=[],costs[5][-7]={cc:95,gd:1296e4},costs[5][-6]={cc:105,gd:648e4},costs[5][-5]={cc:115,gd:324e4},costs[5][-4]={cc:127,gd:162e4},costs[5][-3]={cc:140,gd:81e4},costs[5][-2]={cc:154,gd:405e3},costs[5][-1]={cc:169,gd:202500},costs[5][0]={cc:186,gd:101250},costs[5][1]={cc:205,gd:50625},costs[5][2]={cc:225,gd:25313},costs[5][3]={cc:248,gd:12656},costs[5][4]={cc:272,gd:6328},costs[5][5]={cc:300,gd:3164},costs[5][6]={cc:330,gd:1582},costs[5][7]={cc:362,gd:791},costs[6]=[],costs[6][-7]={cc:143,gd:1944e4},costs[6][-6]={cc:157,gd:972e4},costs[6][-5]={cc:173,gd:486e4},costs[6][-4]={cc:190,gd:243e4},costs[6][-3]={cc:209,gd:1215e3},costs[6][-2]={cc:230,gd:607500},costs[6][-1]={cc:253,gd:303750},costs[6][0]={cc:278,gd:151875},costs[6][1]={cc:306,gd:75938},costs[6][2]={cc:336,gd:37969},costs[6][3]={cc:370,gd:18984},costs[6][4]={cc:407,gd:9492},costs[6][5]={cc:448,gd:4746},costs[6][6]={cc:492,gd:2373},costs[6][7]={cc:542,gd:1187},costs[7]=[],costs[7][-7]={cc:215,gd:29160064},costs[7][-6]={cc:236,gd:14580032},costs[7][-5]={cc:260,gd:7290016},costs[7][-4]={cc:285,gd:3645008},costs[7][-3]={cc:314,gd:1822504},costs[7][-2]={cc:345,gd:911252},costs[7][-1]={cc:380,gd:455626},costs[7][0]={cc:418,gd:227813},costs[7][1]={cc:460,gd:113907},costs[7][2]={cc:506,gd:56953},costs[7][3]={cc:556,gd:28477},costs[7][4]={cc:612,gd:14238},costs[7][5]={cc:673,gd:7119},costs[7][6]={cc:741,gd:3560},costs[7][7]={cc:815,gd:1780},costs[8]=[],costs[8][-7]={cc:321,gd:43740032},costs[8][-6]={cc:353,gd:21870016},costs[8][-5]={cc:389,gd:10935008},costs[8][-4]={cc:428,gd:5467504},costs[8][-3]={cc:470,gd:2733752},costs[8][-2]={cc:517,gd:1366876},costs[8][-1]={cc:569,gd:683438},costs[8][0]={cc:626,gd:341719},costs[8][1]={cc:689,gd:170860},costs[8][2]={cc:757,gd:85430},costs[8][3]={cc:833,gd:42715},costs[8][4]={cc:917,gd:21357},costs[8][5]={cc:1008,gd:10679},costs[8][6]={cc:1109,gd:5339},costs[8][7]={cc:1220,gd:2670},costs[9]=[],costs[9][-7]={cc:482,gd:65609984},costs[9][-6]={cc:531,gd:32804992},costs[9][-5]={cc:584,gd:16402496},costs[9][-4]={cc:642,gd:8201248},costs[9][-3]={cc:706,gd:4100624},costs[9][-2]={cc:777,gd:2050312},costs[9][-1]={cc:855,gd:1025156},costs[9][0]={cc:940,gd:512578},costs[9][1]={cc:1034,gd:256289},costs[9][2]={cc:1137,gd:128145},costs[9][3]={cc:1251,gd:64072},costs[9][4]={cc:1376,gd:32036},costs[9][5]={cc:1514,gd:16018},costs[9][6]={cc:1665,gd:8009},costs[9][7]={cc:1832,gd:4005},costs[10]=[],costs[10][-7]={cc:724,gd:98414976},costs[10][-6]={cc:796,gd:49207488},costs[10][-5]={cc:875,gd:24603744},costs[10][-4]={cc:963,gd:12301872},costs[10][-3]={cc:1059,gd:6150936},costs[10][-2]={cc:1165,gd:3075468},costs[10][-1]={cc:1282,gd:1537734},costs[10][0]={cc:1410,gd:768867},costs[10][1]={cc:1551,gd:384434},costs[10][2]={cc:1706,gd:192217},costs[10][3]={cc:1877,gd:96108},costs[10][4]={cc:2064,gd:48054},costs[10][5]={cc:2271,gd:24027},costs[10][6]={cc:2498,gd:12014},costs[10][7]={cc:2748,gd:6007},costs[11]=[],costs[11][-7]={cc:1085,gd:147622528},costs[11][-6]={cc:1193,gd:73811264},costs[11][-5]={cc:1313,gd:36905632},costs[11][-4]={cc:1444,gd:18452816},costs[11][-3]={cc:1588,gd:9226408},costs[11][-2]={cc:1747,gd:4613204},costs[11][-1]={cc:1922,gd:2306602},costs[11][0]={cc:2114,gd:1153301},costs[11][1]={cc:2325,gd:576651},costs[11][2]={cc:2558,gd:288325},costs[11][3]={cc:2814,gd:144163},costs[11][4]={cc:3095,gd:72081},costs[11][5]={cc:3405,gd:36041},costs[11][6]={cc:3745,gd:18020},costs[11][7]={cc:4120,gd:9010},costs[12]=[],costs[12][-7]={cc:1628,gd:221e6},costs[12][-6]={cc:1791,gd:11e7},costs[12][-5]={cc:1970,gd:55e6},costs[12][-4]={cc:2167,gd:27e6},costs[12][-3]={cc:2383,gd:13e6},costs[12][-2]={cc:2621,gd:6e6},costs[12][-1]={cc:2884,gd:3e6},costs[12][0]={cc:3172,gd:1e6},costs[12][1]={cc:3489,gd:5e5},costs[12][2]={cc:3838,gd:25e4},costs[12][3]={cc:4221,gd:125e3},costs[12][4]={cc:4643,gd:62500},costs[12][5]={cc:5107,gd:31250},costs[12][6]={cc:5618,gd:15625},costs[12][7]={cc:6180,gd:7813},costs[13]=[],costs[13][-7]={cc:2441,gd:332e6},costs[13][-6]={cc:2685,gd:166e6},costs[13][-5]={cc:2954,gd:83e6},costs[13][-4]={cc:3249,gd:41e6},costs[13][-3]={cc:3574,gd:2e7},costs[13][-2]={cc:3931,gd:1e7},costs[13][-1]={cc:4325,gd:5e6},costs[13][0]={cc:4757,gd:25e5},costs[13][1]={cc:5233,gd:125e4},costs[13][2]={cc:5756,gd:625e3},costs[13][3]={cc:6332,gd:312500},costs[13][4]={cc:6965,gd:156250},costs[13][5]={cc:7661,gd:78125},costs[13][6]={cc:8427,gd:39063},costs[13][7]={cc:9270,gd:19531};const useAuctionHouseCheckbox=document.querySelector("#use_ah input[name='use_ah']");useAuctionHouseCheckbox&&useAuctionHouseCheckbox.addEventListener("change",(()=>{document.querySelector("#use_ah div:last-child").classList.toggle("hidden",!useAuctionHouseCheckbox.checked),refresh()})),document.getElementById("cc_ah_cost").addEventListener("blur",(()=>{}));for(var level=2;level<costs.length;level++)document.querySelector("#level"+level+" .cc").innerHTML=costs[level][0].cc;for(level=2;level<costs.length;level++)document.querySelector("#level"+level+" .gd").innerHTML=Math.round(costs[level][0].gd/100);function refresh(){updateNeed(),updateCost()}function updateNumbers(c){var e=c.parentNode.parentNode.parentNode.querySelector(".level").innerHTML,t=parseInt(c.parentNode.querySelector("input").value);document.querySelector("#level"+e+" .cc").innerHTML=costs[e][t].cc,document.querySelector("#level"+e+" .gd").innerHTML=Math.round(costs[e][t].gd/100)}function updateNeed(){for(var c=costs.length-1;c>0;c--){var e=0;if(c<costs.length-1)e=parseInt(document.querySelector("#level"+(c+1)+" .need").innerHTML,10),parseInt(document.querySelector("#level"+(c+1)+" .want input").value,10),parseInt(document.querySelector("#level"+(c+1)+" .have input").value,10);var t=parseInt(document.querySelector("#level"+c+" .want input").value,10),s=parseInt(document.querySelector("#level"+c+" .have input").value,10),o=Math.max(2*e-s+t,0);document.querySelector("#level"+c+" .need").innerHTML=o}}function updateCost(){let c=0,e=0;for(let t=costs.length-1;t>0;t--)if(t>1){let s=parseInt(document.querySelector("#level"+(t-1)+" .need").innerHTML),o=parseInt(document.querySelector("#level"+(t-1)+" .have input").value),d=parseInt(document.querySelector("#level"+t+" .need").innerHTML),r=Math.min((s+o)/2,d)*parseInt(document.querySelector("#level"+t+" .cc").innerHTML);e+=parseInt(document.querySelector("#level"+t+" .gd").innerHTML)*d,c+=r}let t=parseInt(document.querySelector("#level1 .need").innerHTML)*RUNE_PRICE+e*GOLD_DUST_PRICE;document.querySelector("#use_ah input").checked&&(t+=c*(1e4*Math.max(parseInt(document.querySelector("#cc_ah_cost").value),0)));const{gold:s,silver:o,copper:d}=formatCost(t);document.querySelector("#total_gold_cost .gold").innerHTML=s.toLocaleString(),document.querySelector("#total_gold_cost .silver").innerHTML=o,document.querySelector("#total_gold_cost .copper").innerHTML=d,document.querySelector("#total_gds .amount").innerHTML=e.toLocaleString(),document.querySelector("#total_ccs .amount").innerHTML=c.toLocaleString()}function formatCost(c){return c=pad(c,6),{gold:parseInt(c.substring(0,c.length-4)),silver:parseInt(c.substring(c.length-4,c.length-2)),copper:parseInt(c.substring(c.length-2,c.length))}}function pad(c,e){for(var t=""+c;t.length<e;)t="0"+t;return t}document.querySelectorAll("td.ratio button.up").forEach((c=>c.addEventListener("click",(()=>{var e=parseInt(c.parentNode.querySelector("input").value);e<7&&(c.parentNode.querySelector("input").value=e+1),updateNumbers(c),refresh(),event.preventDefault()})))),document.querySelectorAll("td.ratio button.down").forEach((c=>c.addEventListener("click",(e=>{var t=parseInt(c.parentNode.querySelector("input").value);t>-7&&(c.parentNode.querySelector("input").value=t-1),updateNumbers(c),refresh(),e.preventDefault()})))),document.querySelectorAll("td.want button.up").forEach((c=>c.addEventListener("click",(e=>{var t=parseInt(c.parentNode.querySelector("input").value);c.parentNode.querySelector("input").value=t+1,refresh(),e.preventDefault()})))),document.querySelectorAll("td.want button.down").forEach((c=>c.addEventListener("click",(e=>{var t=parseInt(c.parentNode.querySelector("input").value);t>0&&(c.parentNode.querySelector("input").value=t-1),refresh(),e.preventDefault()})))),document.querySelectorAll("td.have button.up").forEach((c=>c.addEventListener("click",(e=>{var t=parseInt(c.parentNode.querySelector("input").value);c.parentNode.querySelector("input").value=t+1,refresh(),e.preventDefault()})))),document.querySelectorAll("td.have button.down").forEach((c=>c.addEventListener("click",(e=>{var t=parseInt(c.parentNode.querySelector("input").value);t>0&&(c.parentNode.querySelector("input").value=t-1),refresh(c.parentNode.parentNode),e.preventDefault()})))),document.getElementById("magic_ratio").addEventListener("click",(c=>{const e=[],t=1e4*Math.max(parseInt(document.getElementById("cc_ah_cost").value),0);for(let c=costs.length-1;c>1;c--)if(0!==parseInt(document.querySelector("#level"+c+" .need").innerHTML)){console.log("level "+c+" rune(s) found");for(var s=Number.MAX_SAFE_INTEGER,o=7;o>=-7;o--){const d=costs[c][o].cc*t+Math.round(costs[c][o].gd/100)*GOLD_DUST_PRICE;d<s&&(e[c]=o,s=d)}}else e[c]=0;for(let c=costs.length-1;c>1;c--)document.querySelector("#level"+c+" .ratio input").value=e[c],updateNumbers(document.querySelector("#level"+c+" .ratio button.down"));refresh(),c.preventDefault()}));